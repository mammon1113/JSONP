<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="utf-8">
	<title>主页</title>
	<!-- <link rel="stylesheet" href="/style.css"> -->
</head>
<body>
	<h5>您的账户余额是 <span id="amount">&&&amount&&&</span></h5>
	<button id="button">付款</button>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script>
		button.addEventListener('click',function(e){
			$.ajax({
				url: "http://luckjeck2.com:8002/pay",
				dataType: "jsonp",
				success: function(response){
					if(response === "success"){
						alert('打钱成功')
						amount.innerText = amount.innerText - 1
					}
				}
			})










			// let functionName = 'jeck1'+parseInt(Math.random()*100000,10)
			// let script = document.createElement('script')
			// script.src = 'http://luckjeck2.com:8002/pay?callback='+ functionName
			// document.body.appendChild(script)
			// window[functionName] = function(result){
			// 	if(result === 'success'){
			// 		alert('success')
			// 		amount.innerText = amount.innerText - 1
			// 	}else{}
			// }
			// script.onload = function(e){
			// 	e.currentTarget.remove()
			// 	delete window[functionName]
			// }
			// script.onerror = function(e){
			// 	alert('打钱失败')
			// 	e.currentTarget.remove()
			// 	delete window[functionName]
			// }
		})
	</script>

		













</body>
</html>